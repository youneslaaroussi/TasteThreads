@startuml TasteThreadsApplication
skinparam dpi 300
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam defaultFontColor #232F3E
skinparam roundcorner 5
skinparam shadowing false
skinparam linetype ortho

skinparam component {
  BackgroundColor #146EB4
  BorderColor #0F4C75
  BorderThickness 2
  FontSize 12
  FontStyle bold
  FontColor #FFFFFF
  Padding 12
}

skinparam package {
  BackgroundColor #F3E5F5
  BorderColor #146EB4
  BorderThickness 3
  FontSize 14
  FontStyle bold
  FontColor #146EB4
  Padding 20
}

skinparam arrow {
  Thickness 2
  Color #232F3E
  FontSize 11
}

skinparam nodesep 100
skinparam ranksep 120

package "APPLICATION LAYER" #F3E5F5 {
  component "API Gateway\nREST + WebSocket" as api_gateway
  component "Tess Orchestrator\nGPT-4o-mini + Pydantic AI" as orchestrator
  component "User Context Provider\nTaste Graph Aggregation" as context_provider
  api_gateway -[hidden]- orchestrator
  orchestrator -[hidden]- context_provider
}

api_gateway --> orchestrator : User Messages
context_provider --> orchestrator : User Context
orchestrator --> api_gateway : AI Responses

@enduml

